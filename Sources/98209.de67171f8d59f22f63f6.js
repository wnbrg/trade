(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[98209,55404,76332,34151,27034,1867],{994861:e=>{e.exports={}},989897:e=>{e.exports={}},223124:(e,t,s)=>{"use strict";s.d(t,{isCancelled:()=>o,makeCancelable:()=>n});class i extends Error{constructor(){super("CancelToken")}}function n(e){let t=!1;return{promise:new Promise(((s,n)=>{e.then((e=>t?n(new i):s(e))),e.catch((e=>n(t?new i:e)))})),cancel(){t=!0}}}function o(e){return e instanceof i}},780792:(e,t,s)=>{"use strict";s.d(t,{AbstractIndicator:()=>r});var i=s(201089),n=s(541558),o=s(876332);s(673747);const a=(0,i.getLogger)("GUI.Blocks.AbstractIndicator");class r{constructor(e){this._classSuffix="",this._quoteSessionPrefix="abstract-indicator",this._shortMode=!1,this._showTooltip=!0,this._subscribed=!1,this._tooltipType="custom",this._lastTooltipText="",this._quoteSession=e.quoteSession}getValue(){return this._value}getTooltipText(){return this._labelMap[this._value]||""}getLabel(){return this._labelMap[this._value]||""}getElement(){return this._el}update(e,t){this._updateValue(e,t),this._render()}setTooltipEnabled(e=!1){this._showTooltip!==e&&(this._showTooltip=e,this._renderTooltip())}enableShortMode(){!0!==this._shortMode&&(this._shortMode=!0,this._render())}disableShortMode(){!1!==this._shortMode&&(this._shortMode=!1,this._render())}isShortModeEnabled(){return this._shortMode}start(){!this._subscribed&&this._symbolName&&(this._quoteSession||(this._quoteSession=(0,o.getQuoteSessionInstance)("simple")),this._quoteSession.subscribe(this._getQuoteSessionId(),this._symbolName,this.update.bind(this)),this._subscribed=!0)}stop(){this._subscribed&&this._quoteSession&&this._symbolName&&(this._quoteSession.unsubscribe(this._getQuoteSessionId(),this._symbolName),this._subscribed=!1)}_init(e){this._el=e.el?e.el:document.createElement("span"),this._el.innerHTML="",this._classMap=e.classMap,this._labelMap=e.labelMap,this._showTooltip=e.showTooltip,this._classSuffix=e.classSuffix,this._symbolName=e.symbol,e.tooltipType&&(this._tooltipType=e.tooltipType),this._quoteSessionGUID=(0,n.guid)(),!0===e.short&&this.enableShortMode(),e.data&&this._updateValue(e.data)}_clearClasses(){Object.values(this._classMap).map((e=>{this._el.classList.remove(`${e}`),this._el.classList.remove(`${e}${this._classSuffix}`)}))}_render(){this._renderClasses(),this._renderTooltip(),this._renderLabel()}_renderLabel(){this._el.textContent=this.getLabel()}_updateValue(e,t){const s=this._getValueFromData(e);(t||s!==this._value)&&(this._value=s)}_renderClasses(){const e=this._el.classList;e.add(this._componentClass,this._componentClass+this._classSuffix);const t=this._classMap[this._value];for(const s in this._classMap){const i=this._classMap[s];i&&(i===t?e.add(i,i+this._classSuffix):e.remove(i,i+this._classSuffix))}!t&&this._value&&a.logWarn(`no className for status ${this._value}`)}_renderTooltip(){const e=this._showTooltip?this.getTooltipText():"";e!==this._lastTooltipText&&(this._lastTooltipText=e,this._el.setAttribute("title",e),
"custom"===this._tooltipType&&this._el.classList.toggle("apply-common-tooltip",this._showTooltip))}_getQuoteSessionId(){return`${this._quoteSessionPrefix}.${this._quoteSessionGUID}`}}},600303:(e,t,s)=>{"use strict";s.d(t,{MarketStatusIndicator:()=>a});var i=s(444372),n=(s(989897),s(780792));const o={invalid:"tv-market-status--invalid",market:"tv-market-status--market",out_of_session:"tv-market-status--out-of-session",post_market:"tv-market-status--post-market",pre_market:"tv-market-status--pre-market",loading:"tv-market-status--loading",holiday:"tv-market-status--holiday",replay:"tv-market-status--replay"};class a extends n.AbstractIndicator{constructor(e){super(e),this._quoteSessionPrefix="market-status-indicator",this._componentClass="tv-market-status",this._extraTitle="",this._init(e)}setStatus(e,t){const s={values:{current_session:e}};this.update(s,t)}getTooltipText(){let e=super.getTooltipText();return""===e||""!==this._extraTitle&&(e=`${e}, ${this._extraTitle}`),e}setExtraTitle(e){this._extraTitle=e}reset(){this._clearClasses(),this._labelEl.textContent="",this._extraTitle="",this._el.setAttribute("title",""),this._value=""}enableShortMode(e=!0){void 0!==this._labelEl&&this._labelEl.classList.add("i-hidden"),super.enableShortMode()}disableShortMode(){void 0!==this._labelEl&&this._labelEl.classList.remove("i-hidden"),super.disableShortMode()}_renderLabel(){this._labelEl.textContent=this.getLabel()}_getValueFromData(e){return void 0!==e.values&&void 0!==e.values.current_session?e.values.current_session:this.getValue()}_render(){this._renderLabelElement(),this._renderDotElement(),super._render()}_init(e){const t=Object.assign({},function(){const e={invalid:i.t(null,void 0,s(814177)),market:i.t(null,void 0,s(486533)),out_of_session:i.t(null,void 0,s(548979)),post_market:i.t(null,void 0,s(566812)),pre_market:i.t(null,void 0,s(845198)),loading:i.t(null,void 0,s(25911)),holiday:i.t(null,void 0,s(988958)),replay:""};return{classMap:o,classSuffix:"",data:{},extraTitle:"",labelMap:e,short:!1,showTooltip:!0,tooltipType:"custom"}}(),e);super._init(t),this.setExtraTitle(t.extraTitle),this._render()}_renderLabelElement(){void 0===this._labelEl&&(this._labelEl=document.createElement("span"),this._labelEl.classList.add(`${this._componentClass}__label`),this._labelEl.classList.add(`${this._componentClass}__label${this._classSuffix}`),this._el.appendChild(this._labelEl))}_renderDotElement(){void 0===this._dotEl&&(this._dotEl=document.createElement("span"),this._dotEl.classList.add(`${this._componentClass}__dot`),this._dotEl.classList.add(`${this._componentClass}__dot${this._classSuffix}`),this._el.appendChild(this._dotEl))}}},461909:(e,t,s)=>{"use strict";function i(e){if(void 0===e)return null;const t=e.match(/(delayed_streaming)_([\d]{1,4})/);return null===t?null:{mode:t[1],interval:parseInt(t[2])}}function n(e){const t=i(e.update_mode);return null===t||(e.update_mode=t.mode,e.update_mode_seconds=t.interval),e}s.r(t),s.d(t,{normalizeUpdateMode:()=>n,parseUpdateMode:()=>i})},220732:(e,t,s)=>{"use strict";s.d(t,{
ChannelMultiplexer:()=>i});class i{constructor(){this._handlers={},this._specialHandlers={}}on(e,t){const s=this._isSpecialChannel(e)?this._specialHandlers:this._handlers;s[e]||(s[e]=[]),s[e].push(t)}off(e,t){const s=this._isSpecialChannel(e)?this._specialHandlers:this._handlers;if(!(e in s))return;if(void 0===t)return void delete s[e];const i=s[e].indexOf(t);i>=0&&s[e].splice(i,1)}emit(e,t,s,i){this._handlers[s]&&this._handlers[s].forEach((n=>{n(e,t,s,i)}));for(const n of Object.keys(this._specialHandlers)){const o="^"+n.replace(/\*/g,".*?")+"$";new RegExp(o).test(s)&&this._specialHandlers[n].forEach((n=>{n(e,t,s,i)}))}}_isSpecialChannel(e){return/\*/.test(e)}}},700469:(e,t,s)=>{"use strict";s.d(t,{MultiplexerState:()=>r});var i=s(707957),n=s(541558),o=s(268222),a=s(226722);class r{constructor(){this._id=(0,n.guid)(),this._state={[this._id]:{}},this._xEventPrefix="multiplexer-state-",this._xEventCreateTab=this._xEventPrefix+"create-new-tab",this._xEventShareState=this._xEventPrefix+"share-state",this._lockName="tab_destruction",this._stateChangeDelegate=new i.Delegate,this._createdLocks={},this._lockEnabled=!0,this._lockPromise=(0,o.createDeferredPromise)(),this._onTabCreateCb=null,this._onTabCreate=e=>{this._onTabCreateCb&&this._onTabCreateCb();const t=JSON.parse(e);this._state[t]={},this._shareState(),this._requestTabRemoveLock(t)},this._shareState=()=>{const e=JSON.stringify([this._id,this._state[this._id]]);a.TVXWindowEvents.emit(this._xEventShareState,e)},this._requestTabRemoveLock=e=>{!this._createdLocks[e]&&this._lockEnabled&&(this._createdLocks[e]=1,navigator.locks.request(`${this._lockName}_${e}`,(async()=>{const t=this._state[e]||{};this._compareTabState(e,{},t,"add"),this._compareTabState(e,t,{},"remove"),delete this._state[e],delete this._createdLocks[e]})))},this._onShareStateFromOther=e=>{const[t,s]=JSON.parse(e),i=this._state[t]||{};this._compareTabState(t,s,i,"add"),this._compareTabState(t,i,s,"remove"),this._state[t]=s,this._requestTabRemoveLock(t)},this._removeChannel=(e,t)=>{delete this._state[this._id][e][t],this._isListenByAnotherTab(e,t)||this._stateChangeDelegate.fire("remove",e,t);0===Object.keys(this._state[this._id][e]).length&&delete this._state[this._id][e]},a.TVXWindowEvents.on(this._xEventCreateTab,this._onTabCreate),a.TVXWindowEvents.on(this._xEventShareState,this._onShareStateFromOther),void 0!==navigator.locks?navigator.locks.request(`${this._lockName}_${this._id}`,(async()=>(a.TVXWindowEvents.emit(this._xEventCreateTab,JSON.stringify(this._id)),window.addEventListener("beforeunload",(()=>this._lockPromise.resolve())),this._lockPromise.promise))):this._lockEnabled=!1}addChannel(e,t){this._isNotEmpty(e,t)?this._state[this._id][e][t]++:(this._state[this._id][e]||(this._state[this._id][e]={}),this._state[this._id][e][t]=1),this._isListenByAnotherTab(e,t)||this._stateChangeDelegate.fire("add",e,t),this._shareState()}removeChannel(e,t){this._isExist(e,t)&&(this._state[this._id][e][t]--,this._isNotEmpty(e,t)||this._removeChannel(e,t),this._shareState())}collectPushStreamChannels(e){
const t=new Set;return Object.keys(this._state).forEach((s=>{const i=this._state[s][e];this._state[s][e]&&Object.keys(i).forEach((e=>t.add(e)))})),Array.from(t)}onStateChange(e){this._stateChangeDelegate.subscribe(null,e)}offStateChange(e){this._stateChangeDelegate.unsubscribe(null,e)}onTabCreate(e){this._onTabCreateCb=e}_isExist(e,t,s=this._id){return void 0!==this._state[s]&&void 0!==this._state[s][e]&&void 0!==this._state[s][e][t]}_isNotEmpty(e,t,s=this._id){return this._isExist(e,t,s)&&this._state[s][e][t]>0}_compareTabState(e,t,s,i){Object.keys(t).forEach((n=>{Object.keys(t[n]).forEach((t=>{this._isListenByAnotherTab(n,t,e)||s[n]&&s[n][t]||this._stateChangeDelegate.fire(i,n,t)}))}))}_isListenByAnotherTab(e,t,s=this._id){return Object.keys(this._state).some((i=>i!==s&&this._isNotEmpty(e,t,i)))}}},501867:(e,t,s)=>{"use strict";s.r(t),s.d(t,{pushStreamMultiplexer:()=>S});var i=s(167175),n=s(226722),o=s(345848),a=s(49437),r=s(944454),h=s(175203),l=s(201089),c=s(740111),_=(s(659863),s(220732)),u=s(125226),d=s(541558),m=s(314802),p=s(700469),g=s(268222);const f=(0,l.getLogger)(c.loggerSubsystemId),v={url:window.PUSHSTREAM_URL,urlPath:"message-pipe-ws",transportType:c.TransportType.WebSocket},b={url:window.PUSHSTREAM_URL.replace("wss://","https://"),urlPath:"message-pipe-es",transportType:c.TransportType.EventSource};class y{constructor(){var e;this.guid=(0,d.guid)(),this._pushStreamPublic=null,this._pushStreamPrivate=null,this._statusHandlers=[],this._reconnectHandlers=[],this._userPrivateChannel=null,this._channelMultiplexer=new _.ChannelMultiplexer,this._xEventPrefix="multiplexer-bc-",this._storagePrefix="pushStreamMultiplexerState.",this._userChannelPrefix="private_",this._statusPublic=r.ConnectionStatus.Closed,this._statusPrivate=r.ConnectionStatus.Closed,this._xEventSend=this._xEventPrefix+"send",this._xEventConnectionStatus=this._xEventPrefix+"connectionStatus",this._xEventReconnectCommand=this._xEventPrefix+"reconnectCommand",this._xEventReconnectSuccess=this._xEventPrefix+"reconnectSuccess",this._xEventRequestLogs=this._xEventPrefix+"requestLogs",this._xEventShareLogs=this._xEventPrefix+"shareLogs",this._state=new p.MultiplexerState,this._shareLogsKey=this._storagePrefix+"shareLogs",this._lockName="pushstream",this._lockPromise=(0,g.createDeferredPromise)(),this._dispatchReconnectSuccessCommandFromOther=e=>{if(this.ownPushStream())return;const[t]=this._decodeParams(e);this._callReconnectHandlers(t)},this._dispatchMessage=(e,t,s)=>{this._dispatchMessageToOthers(e,t,s),this._dispatchMessageToSelf(e,t,s,!1)},this._dispatchMessageFromOther=e=>{if(this.ownPushStream())return;const[t,s,i]=this._decodeParams(e);this._dispatchMessageToSelf(t,s,i,!0)},this._dispatchStatusChangeFromOther=e=>{const t=this._decodeConnectionStatus(e),s=t[0],i=t[1];this.ownPushStream()||this._dispatchStatusChangeToSelf(s,i)},this._dispatchReconnectCommandFromOther=()=>{this.ownPushStream()&&this.forceConnect()},this._onRequestLogs=()=>{if(this.ownPushStream()){const e=this._getOwnLogs();let t="";try{t=JSON.stringify(e)}catch(e){
f.logError("Failed to stringify own pushstream logs")}a.TVLocalStorage.setItem(this._shareLogsKey,t),n.TVXWindowEvents.emit(this._xEventShareLogs,t)}},this._onStateChange=(e,t,s)=>{const i="private"===t?this._pushStreamPrivate:this._pushStreamPublic;"add"===e?null==i||i.addChannel(s):null==i||i.removeChannel(s)},this._onNewTabCreate=()=>{this._dispatchStatusChangeToOthers(this._statusPublic,this._statusPrivate)},i.isIOS||i.isIPad||void 0===navigator.locks?(this._state.onStateChange(this._onStateChange),this._instantiatePushStream()):navigator.locks.request(this._lockName,(async()=>(this._state.onStateChange(this._onStateChange),this._state.onTabCreate(this._onNewTabCreate),this._instantiatePushStream(),window.addEventListener("beforeunload",(()=>this._lockPromise.resolve())),this._lockPromise.promise))),n.TVXWindowEvents.on(this._xEventSend,this._dispatchMessageFromOther),n.TVXWindowEvents.on(this._xEventConnectionStatus,this._dispatchStatusChangeFromOther),n.TVXWindowEvents.on(this._xEventReconnectCommand,this._dispatchReconnectCommandFromOther),n.TVXWindowEvents.on(this._xEventReconnectSuccess,this._dispatchReconnectSuccessCommandFromOther),n.TVXWindowEvents.on(this._xEventRequestLogs,this._onRequestLogs),e=()=>{window.loginStateChange&&window.loginStateChange.subscribe(this,this._changeLoginState)},"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}on(e,t){this._channelMultiplexer.on(e,t)}off(e,t){this._channelMultiplexer.off(e,t)}onStatus(e){this._statusHandlers.push({handler:e,isPrivate:!1}),setTimeout((()=>e(this._statusPublic)),0)}onPrivateStatus(e){this._statusHandlers.push({handler:e,isPrivate:!0}),setTimeout((()=>e(this._statusPrivate)),0)}onReconnect(e,t=!1){this._reconnectHandlers.push({handler:e,isPrivate:t})}offReconnect(e){this._reconnectHandlers=this._reconnectHandlers.filter((t=>t.handler!==e))}offStatus(e){this._statusHandlers=this._statusHandlers.filter((t=>t.handler!==e))}forceConnect(){var e,t;f.logNormal("Creating pushstream connection after force connect"),this.ownPushStream()?(null===(e=this._pushStreamPublic)||void 0===e||e.disconnect(),null===(t=this._pushStreamPrivate)||void 0===t||t.disconnect(),this._instantiatePushStream()):n.TVXWindowEvents.emit(this._xEventReconnectCommand)}disconnect(){this.ownPushStream()&&this._destructPushStream()}getLogs(e){return new Promise((t=>{const s=setTimeout((()=>{const e=a.TVLocalStorage.getItem(this._shareLogsKey);t(null!==e?JSON.parse(e):[])}),1e3),i=e=>{let o;n.TVXWindowEvents.off(this._xEventShareLogs,i),n.TVXWindowEvents.emit(this._xEventShareLogs,""),clearTimeout(s);try{o=JSON.parse(e)}catch(e){o=[],f.logError("Failed to parse logs received from master tab")}t(o)};this.ownPushStream()?t(this._getOwnLogs(e)):(n.TVXWindowEvents.on(this._xEventShareLogs,i),n.TVXWindowEvents.emit(this._xEventRequestLogs))}))}ownPushStream(){return!!this._pushStreamPublic||!!this._pushStreamPrivate}pushStream(){if(!this.ownPushStream())throw new Error("Not own PushStream");return this._pushStreamPublic}isConnected(){
return this._statusPublic>0}status(){var e;return null!==(e=this._statusPublic)&&void 0!==e?e:r.ConnectionStatus.Closed}statusPrivate(){var e;return null!==(e=this._statusPrivate)&&void 0!==e?e:r.ConnectionStatus.Closed}userChannel(){if(!this._userPrivateChannel)throw new Error("No user channel");return this._userChannel(this._userPrivateChannel)}addChannel(e){this._state.addChannel(e.startsWith(this._userChannelPrefix)?"private":"public",e)}removeChannel(e){this._state.removeChannel(e.startsWith(this._userChannelPrefix)?"private":"public",e)}static getInstance(){return null===this._instance&&(this._instance=new y),this._instance}_userChannel(e){return this._userChannelPrefix+e}_codeParams(e){const t=[...e];return t.push((new Date).getTime()),JSON.stringify(t)}_decodeParams(e){const t=JSON.parse(e);return t.pop(),t}_instantiatePushStream(){this._pushStreamPublic&&((0,o.trackEvent)("PushstreamDoublePublic",window.user&&window.user.username||"Guest",navigator.userAgent),this._pushStreamPublic.disconnect());const e=this._getPushStreamSettings();this._pushStreamPublic=new c.PushStream(this._dispatchMessage,e),this._pushStreamPublic.connectionStatus().subscribe((e=>{this._dispatchStatusChange(e,this._statusPrivate)})),this._pushStreamPublic.reconnectEvent().subscribe(null,(()=>{this._dispatchReconnectSuccessCommand()})),this._pushStreamPrivate&&((0,o.trackEvent)("PushstreamDoublePrivate",window.user&&window.user.username||"Guest",navigator.userAgent),this._pushStreamPrivate.disconnect()),this._pushStreamPrivate=new c.PushStream(this._dispatchMessage,{...e,maxSize:1}),this._pushStreamPrivate.connectionStatus().subscribe((e=>{this._dispatchStatusChange(this._statusPublic,e)})),this._pushStreamPrivate.reconnectEvent().subscribe(null,(()=>{this._dispatchReconnectSuccessCommand(!0)})),this.on("pushstream_set_user_channel",(e=>{this._setUserChannel(e)})),this._connectChannels()}_destructPushStream(){const e=this._pushStreamPublic;this._pushStreamPublic=null,null==e||e.disconnect();const t=this._pushStreamPrivate;this._pushStreamPrivate=null,null==t||t.disconnect(),this._dispatchStatusChangeFromOther(this._codeParams([r.ConnectionStatus.Closed,r.ConnectionStatus.Closed]))}_connectChannels(){var e,t;null===(e=this._pushStreamPublic)||void 0===e||e.addChannel("public");const s=this._state.collectPushStreamChannels("public");void 0!==s&&s.length>0&&s.map((e=>{var t;return null===(t=this._pushStreamPublic)||void 0===t?void 0:t.addChannel(e)})),"is_authenticated"in window?this._connectUserChannelInitial(!0):window.loginStateChange&&window.loginStateChange.subscribe(this,this._connectUserChannelInitial),this._isPublicPushstreamEnabled()&&(null===(t=this._pushStreamPublic)||void 0===t||t.connect())}_getPushStreamSettings(){return(0,m.isOnMobileAppPage)("any")?(0,u.isFeatureEnabled)("enable_eventsource_pushstream_mobile")?b:v:(0,u.isFeatureEnabled)("enable_eventsource_pushstream_transport")?b:v}_isPublicPushstreamEnabled(){return(0,m.isOnMobileAppPage)("any")||!(0,
u.isFeatureEnabled)("disable_pushstream_connections_for_anonymous_users")||window.is_authenticated||window.TradingView.onChartPage}_connectUserChannelInitial(e){var t,s,i;e&&(window.is_authenticated?(this._userPrivateChannel=null!==(t=window.user.private_channel)&&void 0!==t?t:null,null===(s=this._pushStreamPrivate)||void 0===s||s.addChannel(this.userChannel()),null===(i=this._pushStreamPrivate)||void 0===i||i.connect()):this._userPrivateChannel=null)}_changeLoginState(e){var t,s,i,n;e||(this._isPublicPushstreamEnabled()&&(null===(t=this._pushStreamPublic)||void 0===t||t.connect()),window.is_authenticated?(this._userPrivateChannel=null!==(s=window.user.private_channel)&&void 0!==s?s:null,this.ownPushStream()&&(this.addChannel(this.userChannel()),null===(i=this._pushStreamPrivate)||void 0===i||i.connect())):(this.ownPushStream()&&(this.removeChannel(this.userChannel()),null===(n=this._pushStreamPrivate)||void 0===n||n.disconnect()),this._userPrivateChannel=null))}_setUserChannel(e){f.logNormal("Set user channel "+e),e!==this._userPrivateChannel&&(this.ownPushStream()&&this._userPrivateChannel&&this.removeChannel(this.userChannel()),this._userPrivateChannel=e,this.ownPushStream()&&this._userPrivateChannel&&this.addChannel(this.userChannel()))}_dispatchStatusChange(e,t){this._dispatchStatusChangeToOthers(e,t),this._dispatchStatusChangeToSelf(e,t)}_dispatchStatusChangeToSelf(e,t){e!==this._statusPublic&&(this._statusPublic=e,this._callStatusHandlers(e,!1)),t!==this._statusPrivate&&(this._statusPrivate=t,this._callStatusHandlers(t,!0))}_callStatusHandlers(e,t){f.logNormal("Connection status change: "+e+", private "+t),h.telemetry.sendReport("site","pushstream_status_change"),this._statusHandlers.forEach((s=>{s.isPrivate===t&&s.handler(e)}))}_callReconnectHandlers(e){this._reconnectHandlers.forEach((t=>{t.isPrivate===e&&t.handler()}))}_dispatchReconnectSuccessCommand(e=!1){if(this.ownPushStream()){this._callReconnectHandlers(e);const t=this._codeParams([e]);n.TVXWindowEvents.emit(this._xEventReconnectSuccess,t)}}_decodeConnectionStatus(e){const t=parseInt(e,10);return isNaN(t)?this._decodeParams(e):[t,t]}_dispatchStatusChangeToOthers(e,t){if(this.ownPushStream()){const s=this._codeParams([e,t]);n.TVXWindowEvents.emit(this._xEventConnectionStatus,s)}}_dispatchMessageToSelf(e,t,s,i){const n=e.channel,o=e.content;this._emit(o,t,n,i)}_dispatchMessageToOthers(e,t,s){const i=[e,t,s];n.TVXWindowEvents.emit(this._xEventSend,this._codeParams(i))}_emit(e,t,s,i){this._channelMultiplexer.emit(e,t,s,i)}_getOwnLogs(e){var t;if(this.ownPushStream()){const s=(0,l.getRawLogHistory)(e,c.loggerSubsystemId),i=null===(t=this.pushStream())||void 0===t?void 0:t.getLogs();return[].concat(s,null!=i?i:[])}return[]}}y._instance=null;const S=y.getInstance()},740111:(e,t,s)=>{"use strict";s.d(t,{PushStream:()=>p,TransportType:()=>m,loggerSubsystemId:()=>u});var i=s(650151),n=s(368654),o=s(201089),a=s(944454),r=s(440150);const h=(0,o.getLogger)("PersistentWebsocketTransport");class l extends r.PersistentTransport{constructor(e,t){super(e,h,t)}
sendMessage(e){this._connectionStatus.value()===a.ConnectionStatus.Open?this._socket?this._socket.send(e):h.logError("Something went wrong - code 0x3"):h.logWarn("Attempt to send message but connection is not opened")}_createNativeTransport(e){const t=new WebSocket(e);return t.binaryType="arraybuffer",t.addEventListener("error",this._socketErrorHandler),t.addEventListener("close",this._socketCloseHandler),t.addEventListener("open",this._socketOpenHandler),t.addEventListener("message",this._socketMessageHandler),t}_disconnectTransport(){if(null===this._socket)return;this._socket.removeEventListener("error",this._socketErrorHandler),this._socket.removeEventListener("close",this._socketCloseHandler),this._socket.removeEventListener("open",this._socketOpenHandler),this._socket.removeEventListener("message",this._socketMessageHandler),this._removeOnOfflineListener();const e=this._socket;this._socket=null,this._connectionStatus.setValue(a.ConnectionStatus.Closed),e.readyState!==WebSocket.CLOSED&&e.close()}}var c=s(175203);class _{constructor(){this._queue=[],this._isWorking=!1,this._onResolve=()=>{this._queue.length>0&&this._createPromise(this._queue[0])}}enqueue(e){this._isWorking||this._createPromise(e),this._queue.push(e)}_createPromise(e){this._isWorking=!0,this._wrap(e).then(this._onResolve)}_wrap(e){return new Promise((t=>{e().then((()=>{this._isWorking=!1,this._queue.shift(),t()}))}))}}const u="PushStream",d=(0,o.getLogger)(u);var m;!function(e){e[e.EventSource=0]="EventSource",e[e.WebSocket=1]="WebSocket"}(m||(m={}));class p{constructor(e,t){this._channels=[],this._queue=new _,this._transport=t.transportType===m.EventSource?new n.PersistentEventSourceTransport(this._onPushStreamMessage.bind(this)):new l(this._onPushStreamMessage.bind(this),this._onPushStreamClose.bind(this)),this._settings=t,this._messageHandler=e}addChannel(e){this._queue.enqueue((()=>this._addChannel(e)))}removeChannel(e){this._queue.enqueue((()=>this._removeChannel(e)))}getChannels(){return this._channels}hasChannel(e){return-1!==this._channels.indexOf(e)}connectionStatus(){return this._transport.connectionStatus()}reconnectEvent(){return this._transport.successReconnectReachedEvent()}connect(){(0,i.assert)(0!==this._channels.length,"There is no channels"),this._transport.connect()}disconnect(){this._transport.disconnect()}getLogs(e){return(0,o.getRawLogHistory)(e,u)}_addChannel(e){(0,i.assert)(!this.hasChannel(e),`Channel with name ${e} has already been subscribed`),d.logNormal(`Adding channel ${e}`),this._channels.push(e);const{maxSize:t}=this._settings;return void 0!==t&&this._channels.length>t&&(this._channels=this._channels.slice(this._channels.length-t)),this._transport.setUrl(this._generateUrl())}_removeChannel(e){const t=this._channels.indexOf(e);return(0,i.assert)(-1!==t,`There is no channel with name ${e}`),d.logNormal(`Removing channel ${e}`),this._channels.splice(t,1),this._transport.setUrl(this._generateUrl())}_onPushStreamMessage(e){if("string"!=typeof e)throw new Error("Wrong message type, expected string")
;const t=JSON.parse(e),s=t.id,i=t.channel;-2===s?d.logWarn("Received unexpected message: about removed the channel"):s>0&&(d.logDebug(`Received message: id="${s}" channel="${i}"`),this._messageHandler(t.text,s,i))}_onPushStreamClose(e){1005===e.code&&c.telemetry.sendChartReport("websocket_code_1005")}_generateUrl(){const e=this._channels.join("/");return d.logNormal(`Generate pushstream url - ${e}`),`${this._settings.url}/${this._settings.urlPath}/${e}`}}},594275:(e,t,s)=>{"use strict";s.d(t,{isMcxQuoteData:()=>n});var i=s(12670);function n(e){var t;return!!e&&((0,i.isMcxFlag)(e.symbolname)||"permission_denied"===e.status&&(0,i.isMcxFlag)(null===(t=e.values)||void 0===t?void 0:t.alternative))}},564907:(e,t,s)=>{"use strict";s.d(t,{isSfQuoteData:()=>n});var i=s(852490);function n(e){return!!e&&(!(void 0===e.symbolname||!(0,i.isSfFlag)(e.symbolname))||Boolean("permission_denied"===e.status&&e.values&&void 0!==e.values.alternative&&(0,i.isSfFlag)(e.values.alternative)))}},12670:(e,t,s)=>{"use strict";s.d(t,{isMcxFlag:()=>n});var i=s(416234);function n(e){return e===i.SymbolGroup.McxFlag}},852490:(e,t,s)=>{"use strict";function i(e){return e.endsWith("_dly")}s.d(t,{isSfFlag:()=>i})},132317:(e,t,s)=>{"use strict";s.d(t,{trackActionFollow:()=>n});var i=s(776734);function n(e,t,s){const n=s.authorId?s.authorId.toString():"",o=s.symbol?s.symbol:"",a=s.symbolType?s.symbolType:"";(0,i.getTracker)().then((s=>{s&&s.trackFollow(e,t,n,o,a)}))}},416234:(e,t,s)=>{"use strict";s.d(t,{SymbolGroup:()=>i,getSymbolGroupData:()=>o});s(586463);var i,n=s(444372);function o(e){const t={[i.NseFlag]:{title:n.t(null,void 0,s(343857)),description:n.t(null,void 0,s(552666))}};return t[e]?t[e]:null}!function(e){e.NseFlag="nse_free",e.McxFlag="mcx_free"}(i||(i={}))},799402:(e,t,s)=>{"use strict";s.d(t,{AuthToken:()=>r});var i=s(707957),n=s(201089),o=s(120780);const a=(0,n.getLogger)("ChartApi.AuthToken",{color:"#173"});class r{constructor(){this.invalidated=new i.Delegate,this._tid=0,window.loginStateChange||(window.loginStateChange=new i.Delegate),window.loginStateChange.subscribe(this,(e=>{e||(this._set(window.user.auth_token),this.invalidated.fire())})),this._set(window.user.auth_token)}get(e){return window.is_authenticated?!e&&performance.now()<this._cache.monoValidThru&&Date.now()<this._cache.wallValidThru?(a.logInfo(`Using cached token ${this._cache.token}`),Promise.resolve(this._cache.token)):this._fetch(Boolean(e),0).then((e=>{if(!window.is_authenticated)throw new Error("User logged out while the request was in flight");return this._set(e),e})).catch((e=>(a.logError(`Error fetching new token: ${e&&e.message}`),""))):Promise.resolve("")}reset(){this._set(void 0),this.invalidated.fire()}_set(e){if(window.is_authenticated&&void 0!==e){const t=function(e){if(""===e)return 144e5;try{const t=JSON.parse(atob(e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"))),s=1e3*(t.exp-t.iat);if(!isFinite(s))throw new Error("invalid expiration");return Math.max(s-3e5,3e5)}catch(t){return a.logError(`${e} is invalid: ${t.message}`),144e5}}(e);this._cache={
token:e,monoValidThru:performance.now()+t,wallValidThru:Date.now()+t},clearTimeout(this._tid),this._tid=setTimeout((()=>this.reset()),t),a.logInfo(`Cached for ${t} ms: ${e}`)}else this._cache={token:"",monoValidThru:-1/0,wallValidThru:-1/0},clearTimeout(this._tid),a.logInfo("Cache dropped")}_fetch(e,t){return a.logNormal(`Fetching a new token, grabSession=${e}`),(0,o.fetch)("/quote_token/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e?"grabSession=true":""}).then((e=>{if(!e.ok)throw new Error(`Response status is not ok: ${e.status}`);return e.json().then(String)}),(s=>{if(t>=3)throw s;return a.logWarn("Request failed, will retry"),function(e){return new Promise((t=>setTimeout(t,1e3*e)))}(t).then((()=>this._fetch(e,t+1)))}))}}},6613:(e,t,s)=>{"use strict";s.r(t),s.d(t,{QUOTE_FIELDS:()=>o,QUOTE_FIELDS_CACHE:()=>a,QuoteCache:()=>n});var i=s(650151);class n{constructor(e){this._cache=new Map,this._fields=[...e.fields]}update(e,t,s){const n=(0,i.ensureDefined)(e.symbolname);if(this._cache.has(n)||this._cache.set(n,{symbolname:n,status:e.status,values:{}}),"error"===e.status)return;const o=(0,i.ensureDefined)(this._cache.get(n));o.status=e.status;for(const i of this._fields)t.has(i)&&(s||void 0!==e.values[i])&&(o.values[i]=e.values[i])}get(e){var t;return null!==(t=this._cache.get(e))&&void 0!==t?t:null}fields(){return this._fields}}
const o=new Set(["pro_name","base_name","logoid","currency-logoid","base-currency-logoid","source-logoid","short_name","timezone","current_session","last_price","lp_time","prev_close_price","open_price","high_price","low_price","price_52_week_high","price_52_week_low","ask","ask_size","bid","bid_size","rch","rchp","rtc","data_frequency","reference-last-period-start","business_description","web_site_url","number_of_employees","float_shares_outstanding","earnings_release_next_calendar_date","root","description","exchange","listed_exchange","type","country_code","provider_id","sector","typespecs","visible-plots-set","industry","currency_id","last_price","fractional","minmov","minmove2","pricescale","change","change_percent","volume","average_volume","market_cap_basic","total_revenue","earnings_per_share_basic_ttm","price_earnings_ttm","beta_1_year","dps_common_stock_prim_issue_fy","dividends_yield","earnings_release_next_date","earnings_per_share_forecast_next_fq","earnings_release_date","earnings_per_share_fq","fundamental_currency_code","number_of_employees","web_site_url","business_description","founded","ceo","float_shares_outstanding","total_shares_outstanding","dividend_payout_ratio_ttm","dividends_yield_current","dividend_ex_date_upcoming","dividend_amount_upcoming","dividend_amount_recent","dividend_ex_date_recent","total_revenue_fq_h","total_revenue_fy_h","net_income_fy_h","net_income_fq_h","total_assets_fy_h","total_assets_fq_h","total_liabilities_fy_h","total_liabilities_fq_h","cash_f_operating_activities_fy_h","cash_f_operating_activities_fq_h","cash_f_investing_activities_fy_h","cash_f_investing_activities_fq_h","cash_f_financing_activities_fy_h","cash_f_financing_activities_fq_h","fiscal_period_fy_h","fiscal_period_fq_h","earnings_release_date_fq_h","earnings_release_next_date_fq","earnings_per_share_forecast_next_fq","earnings_per_share_forecast_fq_h","earnings_per_share_fq_h","earnings_fiscal_period_fq_h","next_earnings_fiscal_period_fq","earnings_release_next_time","is_next_earnings_release_date_estimated","symbol-primaryname","currency_code","rates_mc","rates_fy","rates_ttm","value_unit_id","value-unit-id","update_mode","language","local_description","short_description","source","source2","format","recommendation_mark","last_report_frequency","price_target_estimates_num","price_target_average","update_mode_seconds","recommendation_total","recommendation_buy","recommendation_over","recommendation_hold","recommendation_under","recommendation_sell","recommendation_total","price_target_high","price_target_low","rates_pt","rates_pt","total_revenue_fy_h","total_revenue_fq_h","total_revenue_fh_h","net_income_fy_h","net_income_fq_h","net_income_fh_h","total_assets_fy_h","total_assets_fq_h","total_assets_fh_h","total_liabilities_fy_h","total_liabilities_fq_h","total_liabilities_fh_h","cash_f_operating_activities_fy_h","cash_f_operating_activities_fq_h","cash_f_operating_activities_fh_h","cash_f_investing_activities_fy_h","cash_f_investing_activities_fq_h","cash_f_investing_activities_fh_h","cash_f_financing_activities_fy_h","cash_f_financing_activities_fq_h","cash_f_financing_activities_fh_h","fiscal_period_fy_h","fiscal_period_fq_h","fiscal_period_fh_h","fiscal_period_fy","earnings_release_date_fq_h","earnings_release_date_fy_h","earnings_release_date_fh_h","earnings_release_next_date_fq","earnings_release_next_date_fy","earnings_release_next_date_fh","earnings_release_next_time","is_next_earnings_release_date_estimated","earnings_per_share_forecast_next_fq","earnings_per_share_forecast_next_fy","earnings_per_share_forecast_next_fh","earnings_per_share_forecast_fq_h","earnings_per_share_forecast_fy_h","earnings_per_share_forecast_fh_h","earnings_per_share_fq_h","earnings_per_share_fy_h","earnings_per_share_fh_h","earnings_fiscal_period_fq_h","earnings_fiscal_period_fy_h","earnings_fiscal_period_fh_h","next_earnings_fiscal_period_fq","next_earnings_fiscal_period_fy","next_earnings_fiscal_period_fh","revenue_fq_h","revenue_fy_h","revenue_fh_h","revenue_forecast_fq_h","revenue_forecast_fy_h","revenue_forecast_fh_h","revenue_forecast_next_fq","revenue_forecast_next_fy","revenue_forecast_next_fh","revenue_seg_by_business_h","revenue_seg_by_region_h","dividend_payout_ratio_ttm","dividends_yield_current","dividend_ex_date_upcoming","dividend_amount_upcoming","dividend_amount_recent","dividend_ex_date_recent","dividend_amount_h","total_revenue_fy","gross_profit_fy","ebitda_fy","ebit_fy","net_income_fy","total_debt_fy_h","free_cash_flow_fy_h","cash_n_equivalents_fy_h","total_current_assets_fy","total_current_liabilities_fy","total_non_current_assets_fy","total_non_current_liabilities_fy","price_sales_fy_h","price_earnings_fy_h","diluted_net_income_ttm","total_revenue_ttm","price_earnings_current","price_sales_current","isin","website","doc","reddit","twitter","facebook","telegram","forum","explorer","chat","sources","contracts","crypto_common_categories","crypto_asset","dividends_availability","earnings_availability","financials_availability","etf_region_exposure","top_holdings","unit-id","options-info"]),a=new n({
fields:o})},876332:(e,t,s)=>{"use strict";s.r(t),s.d(t,{destroyQuoteSessions:()=>l,getQuoteSessionInstance:()=>a,getQuoteSessionNoEnsure:()=>h,setQuoteSessionInstance:()=>r});var i=s(11228),n=s.n(i);const o={};function a(e="full"){return o[e]||r(e,new(n())(e)),o[e]}function r(e="full",t){o[e]=t}function h(e="full"){return o[e]}function l(){for(const e in o)if(o.hasOwnProperty(e)){const t=o[e];void 0!==t&&t.destroy(),delete o[e]}}},433084:(e,t,s)=>{"use strict";s.d(t,{QuoteSession:()=>n});var i=s(541558);class n{constructor(e,t=(0,i.randomHash)()){this._sessionstarted=!1,this._globalHandler=null,this._chartApi=e,this._sessionid="qs_"+t}destroy(){this._sessionstarted&&(this._chartApi.quoteDeleteSession(this._sessionid),this._sessionstarted=!1)}connected(){return this._chartApi.connected()}connect(e){this._globalHandler=e,this._chartApi.createSession(this._sessionid,this),this._chartApi.connect()}disconnect(){this._chartApi.disconnect()}quoteAddSymbols(e){this._chartApi.quoteAddSymbols(this._sessionid,e)}quoteRemoveSymbols(e){this._chartApi.quoteRemoveSymbols(this._sessionid,e)}quoteFastSymbols(e){this._chartApi.quoteFastSymbols(this._sessionid,e)}quoteSetFields(e){this._chartApi.quoteSetFields(this._sessionid,e)}onMessage(e){var t;switch(e.method){case"connected":this._sessionstarted||(this._chartApi.quoteCreateSession(this._sessionid),this._sessionstarted=!0);break;case"disconnected":this._sessionstarted=!1}null===(t=this._globalHandler)||void 0===t||t.call(this,e)}quoteHibernateAll(){this._chartApi.quoteHibernateAll(this._sessionid)}}window.TradingView.QuoteSession=n},11228:(e,t,s)=>{"use strict";e=s.nmd(e);var i=s(343370).default,n=s(12481).default,o=s(624444).PriceFormatter;const{uniq:a}=s(337779);var r=s(541558);const{normalizeUpdateMode:h}=s(461909);var l=s(329806).deepExtend;const{QUOTE_FIELDS_CACHE:c,QUOTE_FIELDS:_}=s(6613);var u,d=s(707957).Delegate;function m(e,t){this.options=Object.assign({throttleTimeout:125},t),this._connected=!1,this._symbol_data={},this._subscriptions={},this.onConnect=new d,this.onDisconnect=new d,this._quoteApi=new u(window.ChartApiInstance),this._type=e||"full",this._delayUpdateFastSymbols=n(this._updateFastSymbols,250),this._throttledSymbolData={},this._formatterValuesCache={},this._waitingForFormatters={},this._snapshotValuesCache={},this._waitingForSnapshot={},this.connect()}u=s(433084).QuoteSession,m.prototype.destroy=function(){this._quoteApi.destroy(),this._quoteApi=null,this._connected=!1,this.onDisconnect.fire()},m.prototype.typeFields={},m.prototype.typeFields.simple=["base-currency-logoid","ch","chp","currency-logoid","currency_code","currency_id","base_currency_id","current_session","description","exchange","format","fractional","is_tradable","language","local_description","listed_exchange","logoid","lp","lp_time","minmov","minmove2","original_name","pricescale","pro_name","short_name","type","typespecs","update_mode","volume","value_unit_id"],
m.prototype.typeFields.simpleDetailed=[].concat(m.prototype.typeFields.simple,["ask","bid","fundamentals","high_price","is_tradable","low_price","open_price","prev_close_price","rch","rchp","rtc","rtc_time","status","basic_eps_net_income","beta_1_year","earnings_per_share_basic_ttm","industry","market_cap_basic","price_earnings_ttm","sector","volume","dividends_yield","timezone"]),m.prototype.typeFields.full=[],m.prototype.typeFields.watchlist=[].concat(m.prototype.typeFields.simple,["rchp","rtc","country_code","provider_id"]),m.prototype.typeFields.portfolio=["pro_name","short_name","exchange","listed_exchange","description","sector","type","typespecs","industry","currency_code","currency_id","ch","chp","logoid","currency-logoid","base-currency-logoid","earnings_per_share_forecast_next_fq","earnings_release_next_date","earnings_release_date","earnings_per_share_fq","lp","fractional","minmov","minmove2","pricescale","volume","average_volume","market_cap_basic","total_revenue","earnings_per_share_basic_ttm","price_earnings_ttm","beta_1_year","dps_common_stock_prim_issue_fy","dividends_yield","fundamental_currency_code","rates_mc","rates_fy","rates_ttm","format","value_unit_id"],m.prototype.typeFields.notes=["short_name","pro_name","logoid","currency-logoid","base-currency-logoid","symbol-primaryname","type","typespecs"],m.prototype.typeFields.estimates=["fundamental_data","type","typespecs","earnings_per_share_forecast_next_symbol_currency_fq","earnings_release_next_aligned_date","earnings_release_next_calendar_date","earnings_release_next_date"],m.prototype.connect=function(e){this._quoteApi.connect(this.quoteHandler.bind(this))},m.prototype.quoteHandler=function(e){var t=e.method,s=e.params;switch(t){case"connected":this._connected||(this._connected=!0,this.onConnected());break;case"quote_list_fields":break;case"quote_symbol_data":this._connected&&this.onSymbolData(s[0]);break;case"quote_completed":this._connected&&this.onSymbolData({symbolname:s[0],complete:performance.now(),values:{}});break;case"disconnected":this._connected&&(this._connected=!1,this.onDisconnect.fire())}},m.prototype.onConnected=function(){this.setFields();var e=Object.keys(this._symbol_data);e.length&&(this._quoteApi.quoteAddSymbols(e),this._delayUpdateFastSymbols()),this.onConnect.fire()},m.prototype.setFields=function(){var e=m.prototype.typeFields[this._type];e&&e.length&&this._quoteApi.quoteSetFields(e)},m.prototype.onSymbolData=function(e){try{e.status&&c.update(e,_,!1)}catch(e){}var t=e.symbolname,s=this._throttledSymbolData[t];s||(s=this._throttledSymbolData[t]={fnDispatch:i(this.dipatchSymbolData.bind(this),this.options.throttleTimeout)}),s.cache?l(s.cache,e):s.cache=e,s.fnDispatch(t)},m.prototype._parseUpdateMode=function(e){h(e)},m.prototype.dipatchSymbolData=function(e){var t=this._symbol_data[e],s=this._throttledSymbolData[e].cache;if(delete this._throttledSymbolData[e].cache,this._symbol_data[e])for(var i in l(t,s),t.values&&this._parseUpdateMode(t.values),this._subscriptions){var n=this._subscriptions[i]
;n.has(e)&&[...n.get(e)].forEach((function(e){e(t,s)}))}},m.prototype.subscribe=function(e,t,s){this._subscriptions[e]=this._subscriptions[e]||new Map;var i=this._subscriptions[e];t=[].concat(t);var n=[];t.forEach((function(e){this._symbol_data[e]?i&&i.has(e)||this._symbol_data[e].subscribers_count++:(this._symbol_data[e]={subscribers_count:1},n.push(e)),i.has(e)||i.set(e,[]),i.get(e).push(s),i.get(e).fast=!0,this._symbol_data[e]&&this._symbol_data[e].values&&s(this._symbol_data[e],this._symbol_data[e])}),this),n.length&&this._connected&&(this._quoteApi.quoteAddSymbols(n),this._delayUpdateFastSymbols())},m.prototype.unsubscribe=function(e,t,s){t=[].concat(t);for(var i=this._subscriptions[e],n=[],o=0;o<t.length;o++){var a=t[o];if(i)if(i.has(a)&&s){var r=i.get(a).indexOf(s);~r&&i.get(a).splice(r,1),i.get(a).length||i.delete(a)}else i.delete(a);i&&0===i.size&&delete this._subscriptions[e],this._symbol_data.hasOwnProperty(a)&&(i&&!i.has(a)&&this._symbol_data[a].subscribers_count--,this._symbol_data[a].subscribers_count||(delete this._symbol_data[a],n.push(a)))}n.length&&this._connected&&(this._quoteApi.quoteRemoveSymbols(n),this._delayUpdateFastSymbols())},m.prototype.setFastSymbols=function(e,t){if(this._subscriptions[e])for(var s=this._subscriptions[e],i=Array.from(s.keys()),n=0;n<i.length;++n){var o=i[n];s.get(o).fast=-1!==t.indexOf(o)}this._delayUpdateFastSymbols()},m.prototype._updateFastSymbols=function(){if(this._connected){var e=this._fastSymbols();0===e.length?this._quoteApi.quoteHibernateAll():this._quoteApi.quoteFastSymbols(e)}},m.prototype._delayUpdateFastSymbols=m.prototype._updateFastSymbols,m.prototype._fastSymbols=function(){var e=[];for(var t in this._subscriptions)for(var s=this._subscriptions[t],i=Array.from(s.keys()),n=0;n<i.length;++n){var o=i[n];s.get(o).fast&&e.push(o)}return e=a(e)},m.prototype.formatter=function(e,t){var s=this;if(this._waitingForFormatters[e])return this._waitingForFormatters[e];function i(e){var s=t&&!e.fractional?1:e.minmov;return new o(e.pricescale,s,e.fractional,e.minmove2)}var n=new Promise((function(t,n){if(s._formatterValuesCache[e])t(i(s._formatterValuesCache[e]));else{var o=r.guid();s.subscribe(o,[e],(function(a){"error"===a.status&&(s._waitingForFormatters[e]=null,n("Quotes snapshot is not received")),function(e){return e&&null!=e.pricescale&&null!=e.minmov}(a.values)&&(s._waitingForFormatters[e]=null,s._formatterValuesCache[e]=a.values,t(i(a.values)),s.unsubscribe(o,e))}))}}));return this._waitingForFormatters[e]=n,n},m.prototype.snapshot=function(e){var t=this;if(this._waitingForSnapshot[e])return this._waitingForSnapshot[e];var s=new Promise((function(s,i){if(t._snapshotValuesCache[e])s(t._snapshotValuesCache[e]);else{var n=r.guid();t.subscribe(n,[e],(function(o){"error"===o.status&&(t._waitingForSnapshot[e]=null,i("Quotes snapshot is not received"));var a=o.values;a&&a.minmov&&a.pricescale&&a.description&&(t._waitingForSnapshot[e]=null,t._snapshotValuesCache[e]=a,s(a),t.unsubscribe(n,e))}))}}));return this._waitingForSnapshot[e]=s,s},
TradingView.QuoteSessionMultiplexer=m,e&&e.exports&&(e.exports=m)},497981:(e,t,s)=>{"use strict";s.d(t,{PriceColorer:()=>i});var i,n=s(81979),o=s(987088);!function(e){function t(e,t){return 0===e?t&&void 0!==t.neutral?t.neutral:n.color.black70:e>0?t&&void 0!==t.up?t.up:o.colorsPalette["color-success"]:t&&void 0!==t.down?t.down:o.colorsPalette["color-danger"]}e.formatSign=t,e.formatDiff=function(e,s){return t(s-e)},e.domDifference=function(e,t,s=0,i="",n=""){function o(e){const t=document.createElement("span");return t.innerHTML=e,t}const a=document.createElement("div");if(!s)return a.appendChild(o(e)),a;const r=e+"",h=t+"";let l=null;if(r.length===h.length){for(let e=0;e<r.length;e++)if(r.charAt(e)!==h.charAt(e)){l=e;break}}else l=Number("0");if(null===l)return a.appendChild(o(r)),a;const c=o(r.substring(0,l)),_=document.createElement("span");return _.className=s<0?i:n,_.appendChild(o(r.substring(l))),a.appendChild(c),a.appendChild(_),a}}(i||(i={}))},846540:(e,t,s)=>{"use strict";s.r(t),s.d(t,{types:()=>i});const i={ECONOMIC:"economic",QUANDL:"quandl"}},944454:(e,t,s)=>{"use strict";var i;s.d(t,{ConnectionStatus:()=>i}),function(e){e[e.Closed=0]="Closed",e[e.Connecting=1]="Connecting",e[e.Open=2]="Open"}(i||(i={}))},368654:(e,t,s)=>{"use strict";s.d(t,{PersistentEventSourceTransport:()=>a});var i=s(944454),n=s(440150);const o=(0,s(201089).getLogger)("PersistentWebsocketTransport");class a extends n.PersistentTransport{constructor(e){super(e,o),this._specializedErrorHandlerBound=this._specializedErrorHandler.bind(this)}_createNativeTransport(e){const t=new EventSource(e,{withCredentials:!0});return t.addEventListener("error",this._specializedErrorHandlerBound),t.addEventListener("open",this._socketOpenHandler),t.addEventListener("message",this._socketMessageHandler),t}_disconnectTransport(){if(null===this._socket)return;this._socket.removeEventListener("error",this._specializedErrorHandlerBound),this._socket.removeEventListener("open",this._socketOpenHandler),this._socket.removeEventListener("message",this._socketMessageHandler),this._removeOnOfflineListener();const e=this._socket;this._socket=null,this._connectionStatus.setValue(i.ConnectionStatus.Closed),e.readyState!==WebSocket.CLOSED&&e.close()}_specializedErrorHandler(e){e.eventPhase===EventSource.CLOSED?this._socketCloseHandler(e):this._socketErrorHandler()}}},440150:(e,t,s)=>{"use strict";s.d(t,{PersistentTransport:()=>h});var i=s(944454),n=s(978137),o=s(401580),a=s(707957),r=s(266325);class h{constructor(e,t,s){this._url="",this._socket=null,this._reconnectCount=0,this._onlineCancellationToken=null,this._connectionStatus=new o.WatchedValue(i.ConnectionStatus.Closed),this._socketCloseHandler=this._onCloseCallback.bind(this),this._socketErrorHandler=this._onErrorCallback.bind(this),this._socketOpenHandler=this._onOpenCallback.bind(this),this._socketMessageHandler=this._onMessageCallback.bind(this),this._maxReconnectReachedEventDelegate=new a.Delegate,this._successReconnectReachedEventDelegate=new a.Delegate,this._shouldReconnect=!0,this._maxReconnectCount=null,
this._reconnectTimeoutId=0,this._connectAbortController=null,this._tryReconnect=()=>{if(this._disconnect(),this._shouldReconnect){const e=this._getReconnectTimeout();this._logger.logNormal(`Sleeping some time before reconnect ${e}ms`),this._reconnectTimeoutId=setTimeout(this._tryReconnectImpl.bind(this),e)}else this._logger.logNormal("Skip reconnecting because of shouldReconnect state")},this._onOfflineHandler=()=>{this._removeOnOfflineListener(),this._logger.logInfo("Network status changed to offline - trying to reconnect"),this._tryReconnect()},this._logger=t,this._messageHandler=e,this._closeHandler=s,window.addEventListener("unload",(()=>{t.logNormal("Unload event comes - disconnecting without reconnect after that..."),this._shouldReconnect=!1,this._disconnect()}),!1)}setUrl(e){if(this._url===e)return Promise.resolve();const t=this._connectionStatus.value()!==i.ConnectionStatus.Closed;return t&&this._disconnect(),this._url=e,t?this.connect():Promise.resolve()}url(){return this._url}connect(){return this._connectImpl()}setMaxReconnectCount(e){this._maxReconnectCount=e}connectionStatus(){return this._connectionStatus.readonly()}disconnect(){this._shouldReconnect=!1,this._disconnect()}maxReconnectReachedEvent(){return this._maxReconnectReachedEventDelegate}successReconnectReachedEvent(){return this._successReconnectReachedEventDelegate}async _prepareParamsForConnection(e){}_disconnect(){var e;null===(e=this._connectAbortController)||void 0===e||e.abort(),this._connectAbortController=null,clearTimeout(this._reconnectTimeoutId),this._reconnectTimeoutId=0,this._connectionStatus.value()!==i.ConnectionStatus.Closed?this._socket?(this._logger.logNormal(`Closing connection to: ${this._socket.url}, currentStatus: ${i.ConnectionStatus[this._connectionStatus.value()]}`),this._disconnectTransport()):this._logger.logNormal("Disconnecting without socket - probably within preparing, it should be already scheduled for aborting"):this._logger.logNormal("Attempt to close connection but it is closed already")}_onErrorCallback(){this._logger.logInfo("Connection is closed by error"),this._tryReconnect()}_onCloseCallback(e){var t;this._logger.logInfo(`Connection is closed - code=${e.code} msg=${e.reason}`),null===(t=this._closeHandler)||void 0===t||t.call(this,e),this._tryReconnect()}_tryReconnectImpl(){return null!==this._maxReconnectCount&&this._reconnectCount===this._maxReconnectCount?(this._logger.logWarn("Maximum attempts to reconnect to websocket reached"),void this._maxReconnectReachedEventDelegate.fire()):(this._reconnectCount+=1,this._logger.logInfo(`Reconnecting count: ${this._reconnectCount}`),navigator.onLine?(this._logger.logInfo("Network status: online - trying to connect"),void this.connect()):(this._logger.logInfo("Network status: offline - wait until online"),void(this._onlineCancellationToken=(0,n.callWhenOnline)((()=>{this._logger.logInfo("Network status changed to online - trying to connect"),this.connect()})))))}_onOpenCallback(){this._logger.logNormal("Connection opened"),
this._reconnectCount>0&&this._successReconnectReachedEventDelegate.fire(),this._reconnectCount=0,this._connectionStatus.setValue(i.ConnectionStatus.Open)}_onMessageCallback(e){this._messageHandler(e.data)}_getReconnectTimeout(){return this._reconnectCount<5?300:5e3}_setOnOfflineListener(){window.addEventListener("offline",this._onOfflineHandler)}_removeOnOfflineListener(){window.removeEventListener("offline",this._onOfflineHandler)}async _connectImpl(){if(this._connectionStatus.value()!==i.ConnectionStatus.Closed)return void this._logger.logNormal("Attempt to open connection but it is not closed");this._socket&&(this._logger.logError("Something went wrong - code 0x2"),this.disconnect()),this._onlineCancellationToken&&(this._onlineCancellationToken(),this._onlineCancellationToken=null),this._logger.logNormal(`Connecting to ${this._url}`),this._shouldReconnect=!0,this._connectAbortController=new AbortController;const e=this._connectAbortController.signal;try{if(this._connectionStatus.setValue(i.ConnectionStatus.Connecting),await this._prepareParamsForConnection(e),e.aborted)throw(0,r.createAbortError)();this._socket=this._createNativeTransport(this._url),this._setOnOfflineListener()}catch(e){this._connectionStatus.setValue(i.ConnectionStatus.Closed),(0,r.skipAbortError)(e)}finally{this._connectAbortController=null}}}},924335:(e,t,s)=>{"use strict";s.d(t,{LastChanceType:()=>o,OFFERS:()=>i,OfferKind:()=>n});const i={trial:"trial",early_access:"early_access",black_friday:"black_friday",cyber_monday:"cyber_monday",custom_discount:"custom_discount",longer_cycle:"longer_cycle",upgrade:"upgrade",extend:"extend",last_chance:"last_chance",one_usd:"one_usd",three_months:"three_months",six_months:"six_months",coupon:"coupon"},n={early_access:"early_access",black_friday:"black_friday",last_chance:"last_chance",one_usd:"1 usd offer",three_months:"3 months offer",six_months:"six_months",custom_discount:"custom_discount"};var o;!function(e){e.TwoWeeks="LastChance_2w",e.TwoDays="LastChance_2d",e.Hours="LastChance_24h"}(o||(o={}))},371927:(e,t,s)=>{"use strict";s.d(t,{ActionButtonsLayout:()=>o,ContentAlign:()=>n,PredefinedAction:()=>i});var i,n,o;s(919346);!function(e){e.Close="close",e.OpenGopro="openGopro"}(i||(i={})),function(e){e.Center="center",e.Left="left"}(n||(n={})),function(e){e.Row="row",e.Column="column"}(o||(o={}))},859261:(e,t,s)=>{"use strict";async function i(e){return(await Promise.all([s.e(70166),s.e(77195),s.e(9817),s.e(92191),s.e(34465),s.e(69121),s.e(66639),s.e(88194),s.e(76592),s.e(32109),s.e(87845),s.e(58755),s.e(61298),s.e(36088),s.e(39843),s.e(13152),s.e(34873),s.e(542),s.e(87689),s.e(97828),s.e(50690),s.e(25977),s.e(93487),s.e(30109),s.e(11595),s.e(42292),s.e(53549),s.e(98277),s.e(68606)]).then(s.bind(s,460978))).createPhoneDialog(e)}async function n(e){
return(await Promise.all([s.e(70166),s.e(77195),s.e(9817),s.e(92191),s.e(34465),s.e(69121),s.e(66639),s.e(88194),s.e(76592),s.e(32109),s.e(87845),s.e(58755),s.e(61298),s.e(36088),s.e(39843),s.e(13152),s.e(34873),s.e(542),s.e(87689),s.e(97828),s.e(50690),s.e(25977),s.e(93487),s.e(30109),s.e(11595),s.e(42292),s.e(53549),s.e(98277),s.e(68606)]).then(s.bind(s,460978))).createEmailDialog(e)}s.d(t,{createPhoneDialog:()=>i,createSMSEmailDialog:()=>n})},402243:(e,t,s)=>{"use strict";s.d(t,{verificationIsRequired:()=>u,whenVerified:()=>d});var i=s(444372),n=s(345848),o=s(859261),a=s(49437),r=s(244842),h=s(823127);let l=h.Deferred();function c(e,t){var s=TVSettings.getBool("_phone_verif_dlg_initial",!0);TVSettings.setValue("_phone_verif_dlg_initial",!1),(0,n.trackEvent)("Phone verification",e+(s?" initial":""),t)}function _(e){const t=h.Deferred();return(0,o.createPhoneDialog)({featureSource:e.source,doNotShowConfirmation:e.doNotShowConfirmation}).then((s=>{s.on("afterOpen",(()=>c("Show dialog",e.source))).on("verification:success",(s=>{t.resolve(s),c("Verified",e.source)})).on("verification:cancel",(()=>{t.reject("cancelled"),c("Cancelled",e.source)})).on("verification:codeExpired",(()=>c("Show dialog",e.source))).open()})),t}function u(e={}){return new Promise((t=>{!window.is_authenticated||user.is_staff||user.is_superuser||user.is_pro||user.is_moderator?t([!1]):e.customPhoneCheck?e.customPhoneCheck()?t([!0,"date-joined"]):t([!1]):r.enabled("phone_verification")&&!user.has_phone?e.isSuspiciousCountry?t([!0]):!0!==e.doNotCheckSocialActivity?t([!0,"date-joined"]):(!0!==e.doNotCheckSuspicious&&t([Boolean(a.TVLocalStorage.getItem("is_suspicious")),"suspicious"]),t([!0,"default"])):t([!1])}))}function d(e={}){const t=h.Deferred();return u({doNotCheckSuspicious:e.doNotCheckSuspicious,doNotCheckSocialActivity:e.doNotCheckSocialActivity,customPhoneCheck:e.customPhoneCheck,isSuspiciousCountry:e.isSuspiciousCountry}).then((([n,o])=>{if(!n)return l.resolve(),t.resolve();if(n&&e.silentPhoneVerification)return t.reject("phone_verification_required");if(!e.showDialog)return l.done((()=>t.resolve()));const a={source:e.source,doNotShowConfirmation:e.doNotShowConfirmation};"suspicious"!==o&&(a.topMessage=i.t(null,void 0,s(236640))),_(a).done((()=>t.resolve())).always((()=>t.reject("phone_verification_declined")))})).catch((e=>e)),t.promise()}window.loginStateChange&&loginStateChange.subscribe(null,(()=>{window.is_authenticated&&(l=h.Deferred(),u().then((([e,t])=>{e||l.resolve()})))}))},327034:(e,t,s)=>{"use strict";s.r(t),s.d(t,{QuoteTicker:()=>y});var i=s(329806),n=s(201089),o=s(389137),a=s(541346),r=s(497981),h=s(624444),l=s(943994),c=s(600303),_=s(719240),u=s(665570),d=s(876332),m=s(594275),p=s(564907);const g=(0,n.getLogger)("QuoteTicker"),f={addDescriptionTitle:!0,changeDirectionDownClass:"down",changeDirectionUpClass:"up",changeDirectionNeutralClass:"neutral",changeInBrackets:!1,changePercentInBrackets:!1,lastPriceTimeInBrackets:!0,rtcTimeInBrackets:!0,clientName:"quote-ticker",dontDyePrice:!1,fallingBg:null,growingBg:null,
lastFallingClass:"falling",lastGrowingClass:"growing",quoteSession:null,signNegative:!0,signPositive:!1,customPriceFormatter:null,customTimeFormatter:null,sessionStatusClassSuffix:"--for-ticker",dataModeClassSuffix:"--for-ticker",showInvalidSymbolStatus:!1,indicatorsTooltipType:"custom",lastPriceLastCharSup:!1,lastPriceHighlightDiffOnly:!1,initedHook:void 0,setStateHook:void 0,permissionDeniedHook:void 0,noSuchSymbolHook:void 0},v=String.fromCharCode(8198),b=/[K,M,B]/;function y(e,t,s={}){this.enabled=!0,this._symbol=e,this._symbolOriginal=null,this._options=(0,i.deepExtend)({},f,s),!1!==this._options.signNegative&&!0!==this._options.signNegative&&delete this._options.signNegative,s.customPriceFormatter&&(this._customPriceFormatter=s.customPriceFormatter),s.customTimeFormatter&&(void 0!==s.customTimeFormatter.lastPrice||void 0!==s.customTimeFormatter.rtc?this._timeFormatter=s.customTimeFormatter:this._timeFormatter={lastPrice:s.customPriceFormatter,rtc:s.customPriceFormatter}),this._percentFormatter=new a.PercentageFormatter,this._defaultPriceFormatter=new h.PriceFormatter(100),this._priceFormatter=this._customPriceFormatter||this._defaultPriceFormatter,this._volumeFormatter=new l.VolumeFormatter(2),this._cache={},this._lastPrice=null,this._lastPriceFormatted="",this._elements={},this._textNodes={},this._changeVolumeLetter=this._getChangeVolumeLetterCallback(),this._setElements(t),this._highlighters={},this._initHighlighters(),this._options.setStateHook&&this.setStateHook(this._options.setStateHook),this.quoteSession=this._options.quoteSession||(0,d.getQuoteSessionInstance)("simple"),this._quoteSessionEventHandler=this.onData.bind(this),this._connectTimeoutId=setTimeout(this.connect.bind(this),0)}function S(e){const t=e.search(b),s=t>=0?`${v}${e.slice(t)}`:"";return[t>0?e.substring(t,0):0===t?"":e,s]}function C(e,t,s,i,n){var o,a=null;function r(){if(o&&(clearTimeout(o),o=void 0),s||t)for(var a=0;a<e.length;a++)e[a].style.background="";if(!s||!t)for(a=0;a<e.length;a++)i&&e[a].classList.remove(i),n&&e[a].classList.remove(n)}return{show:function(h){var l=0;if(h!==a){if(null!==a&&null!==h&&(l=h-a),r(),o=setTimeout(r,750),0<l){if(t)for(var c=0;c<e.length;c++)e[c].style.background=t;else if(i)for(c=0;c<e.length;c++)e[c].classList.add(i)}else if(l<0)if(s)for(c=0;c<e.length;c++)e[c].style.background=s;else if(n)for(c=0;c<e.length;c++)e[c].classList.add(n);null!==h&&(a=h)}},hide:r}}y.prototype._setElements=function(e){this._container=e,this._elements.change=this._findElements(e,["js-symbol-change","symbol-change"]),this._elements.changeDirection=this._findElements(e,["js-symbol-change-direction","symbol-change-direction"]),this._elements.extHrsChangeDirection=this._findElements(e,["js-symbol-ext-hrs-change-direction"]),this._elements.changePercent=this._findElements(e,["js-symbol-change-pt","symbol-change-pt"]),this._elements.description=this._findElements(e,["js-symbol-description-name","symbol-description-name"]),this._elements.extHrsChange=this._findElements(e,"js-symbol-ext-hrs-change"),
this._elements.extHrsChangePercent=this._findElements(e,"js-symbol-ext-hrs-change-pt"),this._elements.extHrsClose=this._findElements(e,"js-symbol-ext-hrs-close"),this._elements.industry=this._findElements(e,["js-symbol-industry","symbol-industry"]),this._elements.last=this._findElements(e,["js-symbol-last","symbol-last"]),this._elements.sector=this._findElements(e,["js-symbol-sector","symbol-sector"]),this._elements.sessionStatus=this._findElements(e,"js-symbol-session-status"),this._elements.shortName=this._findElements(e,["js-symbol-short-name","symbol-short-name"]),this._elements.updateMode=this._findElements(e,"js-data-mode"),this._elements.updateMode.forEach((e=>e.classList.add("i-hidden"))),this._textNodes.change=this._getOrCreateTextNodes(this._elements.change),this._textNodes.changePercent=this._getOrCreateTextNodes(this._elements.changePercent),this._textNodes.extHrsChange=this._getOrCreateTextNodes(this._elements.extHrsChange),this._textNodes.extHrsChangePercent=this._getOrCreateTextNodes(this._elements.extHrsChangePercent),this._textNodes.extHrsClose=this._getOrCreateTextNodes(this._elements.extHrsClose),this._textNodes.last=this._getOrCreateTextNodes(this._elements.last),this._textNodes.open=this._findTextNodes(e,"js-symbol-open"),this._textNodes.eps=this._findTextNodes(e,"js-symbol-eps"),this._textNodes.marketCap=this._findTextNodes(e,"js-symbol-market-cap"),this._textNodes.prevClose=this._findTextNodes(e,"js-symbol-prev-close"),this._textNodes.dividends=this._findTextNodes(e,"js-symbol-dividends"),this._textNodes.priceEarnings=this._findTextNodes(e,"js-symbol-pe"),this._textNodes.volume=this._findTextNodes(e,"js-symbol-volume"),this._textNodes.high=this._findTextNodes(e,"js-symbol-high"),this._textNodes.low=this._findTextNodes(e,"js-symbol-low"),this._textNodes.currency=this._findTextNodes(e,"js-symbol-currency"),this._textNodes.lastPriceTime=this._findTextNodes(e,"js-symbol-lp-time"),this._textNodes.rtcTime=this._findTextNodes(e,"js-symbol-rtc-time"),this._elements.lastHighlight=this._options.lastPriceHighlightDiffOnly?this._elements.last.map((e=>this._appendAndGetNewElement(e,"span"))):this._elements.last,this._textNodes.lastHighlight=this._getOrCreateTextNodes(this._elements.lastHighlight),this._elements.lastSup=this._options.lastPriceLastCharSup?this._elements.lastHighlight.map((e=>this._appendAndGetNewElement(e,"sup"))):[],this._textNodes.lastSup=this._getOrCreateTextNodes(this._elements.lastSup)},y.prototype._findElements=function(e,t){var s=(0,o.isArray)(t)?t:[t];return Array.prototype.concat.apply([],s.map((t=>Array.prototype.slice.call(e.getElementsByClassName(t)))))},y.prototype._findTextNodes=function(e,t){return this._getOrCreateTextNodes(this._findElements(e,t))},y.prototype._getOrCreateTextNodes=function(e){return e.map((e=>{var t=this._getFirstTextNode(e);return t||(t=e.ownerDocument.createTextNode(""),e.appendChild(t)),t}))},y.prototype._appendAndGetNewElement=function(e,t){const s=document.createElement(t);return e.appendChild(s),s},y.prototype._getFirstTextNode=function(e){
for(var t=e.childNodes,s=t.length-1;s>=0;s--)if(3===t.item(s).nodeType)return t.item(s);return null},y.prototype.connect=function(e){this._subscribed||(this._subscribedSymbol=e||this._symbol,this.quoteSession.subscribe(this._options.clientName,this._subscribedSymbol,this._quoteSessionEventHandler),this._subscribed=!0)},y.prototype.disconnect=function(){clearTimeout(this._connectTimeoutId),this._subscribed&&(this.quoteSession.unsubscribe(this._options.clientName,this._subscribedSymbol,this._quoteSessionEventHandler),this._subscribed=!1)},y.prototype.onData=function(e,t){this.enabled&&("ok"===e.status?this.successData(e,t):"permission_denied"===e.status?this.onPermissionDenied(e):"error"===e.status&&this.errorData(e))},y.prototype.successData=function(e,t){e.values&&this.setState(e.values,e,t)},y.prototype.onPermissionDenied=function(e){(0,p.isSfQuoteData)(e)||(0,m.isMcxQuoteData)(e)?this._options.permissionDeniedHook?this._options.permissionDeniedHook(e,this._symbolOriginal||this._symbol):this.errorData(e):this.downgradeData(e)},y.prototype.errorData=function(e){this._options.showInvalidSymbolStatus&&(this.setShortName(this._symbol),this._elements.sessionStatus.map((e=>new c.MarketStatusIndicator({classSuffix:this._options.sessionStatusClassSuffix,el:e,data:{values:{current_session:"invalid"}},tooltipType:this._options.indicatorsTooltipType})))),this._options.noSuchSymbolHook?(this._symbolOriginal&&this.setShortName(this._symbolOriginal),this._options.noSuchSymbolHook.call(this,e,this._symbolOriginal||this._symbol)):g.logWarn("No data for: "+this._symbol)},y.prototype.downgradeData=function(e){{const t=e&&e.values&&e.values.alternative,s=this._symbol===t;if(!(t&&-1!==t.indexOf(":"))||s)return void this.errorData(e);this._symbolOriginal=this._symbol,this._symbol=t,this._subscribed=!1,this.connect()}},y.prototype.setState=function(e,t,s){const i=s.values;this._isVolumeFormat="volume"===e.format,null==i.pricescale&&null==i.minmov&&null==i.fractional&&null==i.minmove2||(this._priceFormatter=this._customPriceFormatter||this._isVolumeFormat&&this._volumeFormatter||new h.PriceFormatter(e.pricescale||100,e.minmov||1,e.fractional,e.minmove2));const n=this._options,o=this._percentFormatter,a=this._priceFormatter,r=this._defaultPriceFormatter,d=this._volumeFormatter;i.timezone&&this._timeFormatter&&(this._timeFormatter.lastPrice&&this._timeFormatter.lastPrice.setTimezone(i.timezone),this._timeFormatter.rtc&&this._timeFormatter.rtc.setTimezone(i.timezone));const m=(e,t=!0)=>t?`(${e})`:e,p=void 0!==n.signPositiveChange?n.signPositiveChange:n.signPositive,f=e=>{const t=a.format(e,p,void 0,n.signNegative);return m(t,n.changeInBrackets)},v=e=>{const t=o.format(e,p,void 0,n.signNegative);return m(t,n.changePercentInBrackets)},b=a.format.bind(a),y=r.format.bind(r),S=d.format.bind(d),C=e=>null==e?l.PLACE_HOLDER:y(e);n.disableChange||(this._setNodesValue(this._textNodes.change,i.change,f),this._setNodesValue(this._textNodes.changePercent,i.change_percent,v),
null!=i.change&&(n.dontDyePrice||this._setChangeFontColor([].concat(this._elements.change,this._elements.changePercent),i.change,n.changeUpFontColor,n.changeDownFontColor,n.changeNeutralFontColor),this._setChangeDirection(this._elements.changeDirection,i.change)),this._setNodesValue(this._textNodes.extHrsChange,i.rch,f),this._setNodesValue(this._textNodes.extHrsChangePercent,i.rchp,v),null!=i.rch&&(n.dontDyePrice||this._setChangeFontColor([].concat(this._elements.extHrsChange,this._elements.extHrsChangePercent),i.rch,n.changeUpFontColor,n.changeDownFontColor,n.changeNeutralFontColor),this._setChangeDirection(this._elements.extHrsChangeDirection,i.rch))),this._setNodesValue(this._textNodes.prevClose,i.prev_close_price,b),this._setNodesValue(this._textNodes.dividends,e.dividends_yield,(e=>null==e?l.PLACE_HOLDER:o.format(e,n.signPositive,void 0,n.signNegative)),!0);let w=(0,u.getTranslatedSymbolDescription)(i);if(w&&(w=this._prepareSymbolDescription(w),this._setTextsContent(this._elements.description,w),this._options.addDescriptionTitle))for(var x=0;x<this._elements.description.length;x++)this._elements.description[x].setAttribute("title",w);if((null!=i.short_name||null!=i.exchange)&&e.short_name){var P=e.short_name;"QUANDL"===e.exchange&&void 0!==e.short_name.split("/")[1]&&(P=e.short_name.split("/")[1]+", "+e.short_name.split("/")[0]),this.setShortName(P)}this._setLastValue(i.last_price,b),this._setNodesValue(this._textNodes.extHrsClose,i.rtc,b),i.rtc&&this._highlighters.extHrsClose.show(i.rtc),i.industry&&this._setTextsContent(this._elements.industry,e.industry,(e=>e)),i.sector&&this._setTextsContent(this._elements.sector,e.sector),this._elements.sessionStatus&&i.current_session&&(this._sessionStatusInstances?this._sessionStatusInstances.forEach((e=>e.setStatus(i.current_session))):this._sessionStatusInstances=this._elements.sessionStatus.map((t=>new c.MarketStatusIndicator({classSuffix:this._options.sessionStatusClassSuffix,el:t,short:!0,data:{values:i},quoteSession:this.quoteSession,symbol:e.original_name,manualUpdate:!0,tooltipType:this._options.indicatorsTooltipType})))),this._setNodesValue(this._textNodes.open,i.open_price,b),this._setNodesValue(this._textNodes.high,i.high_price,b),this._setNodesValue(this._textNodes.low,i.low_price,b),this._setNodesValue(this._textNodes.eps,e.earnings_per_share_basic_ttm,C,!0),this._setNodesValue(this._textNodes.priceEarnings,e.price_earnings_ttm,C,!0),this._setNodesValue(this._textNodes.marketCap,e.market_cap_basic,S,!0),this._setNodesValue(this._textNodes.volume,e.volume,S,!0);const E=i.currency_code||i.value_unit_id;if(E&&this._setNodesValue(this._textNodes.currency,"PCT"===E?"%":E,null,!0),(i.lp_time||i.timezone&&e.lp_time)&&this._textNodes.lastPriceTime.length&&(this._timeFormatter&&this._timeFormatter.lastPrice?this._setNodesValue(this._textNodes.lastPriceTime,m(this._timeFormatter.lastPrice.format(e.lp_time),this._options.lastPriceTimeInBrackets)):g.logError("last price time field requested with no formatter provided")),
(i.rtc_time||i.timezone&&e.rtc_time)&&this._textNodes.rtcTime.length&&(this._timeFormatter&&this._timeFormatter.rtc?this._setNodesValue(this._textNodes.rtcTime,m(this._timeFormatter.rtc.format(e.rtc_time),this._options.rtcTimeInBrackets)):g.logError("rtc time field requested with no formatter provided")),null!=i.last_price)for(x=0;x<this._elements.updateMode.length;x++)this._elements.updateMode[x].classList.remove("i-hidden");this._elements.updateMode&&(i.update_mode||i.update_mode_seconds)&&(this._updateModeInstances?this._updateModeInstances.forEach((t=>t.update({values:e}))):this._updateModeInstances=this._elements.updateMode.map((t=>new _.DataModeIndicator({classSuffix:this._options.dataModeClassSuffix,el:t,data:{values:e},modeInterval:e.update_mode_seconds,short:!0,tooltipType:this._options.indicatorsTooltipType})))),this._setStateHook&&this._setStateHook(t.values,s.values,t.complete),this._lastPrice?this._highlighters.last.show(e.last_price):null===this._lastPrice&&(this._container.classList.add("quote-ticker-inited"),"function"==typeof this._options.initedHook&&this._options.initedHook("last_price"in e)),this._lastPrice=e.last_price},y.prototype._setNodesValue=function(e,t,s,i){if(null!=t||i)for(var n="function"==typeof s?s(t):t,o=0;o<e.length;o++)e[o].nodeValue=n},y.prototype._setTextsContent=function(e,t,s){if(e&&e.length&&t)for(var i="function"==typeof s?s(t):t,n=0;n<e.length;n++)e[n].textContent=i},y.prototype._setLastValue=function(e,t){if(null==e)return;const s="function"==typeof t?t(e):String(e);if(s===this._lastPriceFormatted)return;const[i,n,o]=this._options.lastPriceHighlightDiffOnly?this._getLastValueStringDiff(this._lastPriceFormatted,s):["",s,""],a=i,[r,h]=this._options.lastPriceLastCharSup?[n.slice(0,-1),n.slice(-1)]:[n,""];this._options.lastPriceHighlightDiffOnly&&(this._isVolumeFormat&&this._changeVolumeLetter.call(this,o),this._setNodesValue(this._textNodes.last,a)),this._setNodesValue(this._textNodes.lastHighlight,r),this._setNodesValue(this._textNodes.lastSup,h),this._lastPriceFormatted=s},y.prototype._getChangeVolumeLetterCallback=function(){let e;return function(t){t!==e&&(e=t,this._elements.last.forEach((t=>{3!==t.childNodes.length?t.appendChild(document.createTextNode(e)):t.childNodes[2].nodeValue=e})))}},y.prototype._getLastValueStringDiff=function(e,t){if(e===t){const[e,s]=S(t);return[e,"",s]}let s=0;for(;e[s]===t[s];)s++;const[i,n]=S(t.slice(s));return[t.slice(0,s),i,n]},y.prototype._setChangeFontColor=function(e,t,s,i,n){for(var o=r.PriceColorer.formatSign(t,{up:s,down:i,neutral:n}),a=0;a<e.length;a++)e[a].style.color=o},y.prototype._setChangeDirection=function(e,t){for(var s=0;s<e.length;s++){var i=e[s].classList;i.toggle(this._options.changeDirectionUpClass,t>0),i.toggle(this._options.changeDirectionDownClass,t<0),i.toggle(this._options.changeDirectionNeutralClass,0===t)}},y.prototype.setShortName=function(e=""){this._setTextsContent(this._elements.shortName,e)},y.prototype._prepareSymbolDescription=function(e){var t=this._getCache("symbol-description:"+e);return t||(t=e,
this._setCache("symbol-description:"+e,t),t)},y.prototype._initHighlighters=function(){this._highlighters.last=new C(this._elements.lastHighlight,this._options.growingBg,this._options.fallingBg,this._options.lastGrowingClass,this._options.lastFallingClass),this._highlighters.extHrsClose=new C(this._elements.extHrsClose,this._options.growingBg,this._options.fallingBg,this._options.lastGrowingClass,this._options.lastFallingClass)},y.prototype.disable=function(){this.enabled=!1,this.disconnect()},y.prototype.enable=function(){this.enabled=!0,this.connect()},y.prototype.setStateHook=function(e){null===e&&this._setStateHook?delete this._setStateHook:"function"==typeof e&&(this._setStateHook=e)},y.prototype._setCache=function(e,t){null==t?delete this._cache[e]:this._cache[e]=t},y.prototype._getCache=function(e){return this._cache&&this._cache[e]}},978137:(e,t,s)=>{"use strict";s.d(t,{callWhenOnline:()=>n,waitForOnline:()=>o});var i=s(266325);function n(e){let t=e;const s=()=>{window.removeEventListener("online",s),t&&t()};return window.addEventListener("online",s),()=>{t=null}}async function o(e=null){return!0===navigator.onLine||void 0===navigator.onLine?Promise.resolve():(0,i.respectAbort)(e,new Promise((e=>{const t=()=>{window.removeEventListener("online",t),e()};window.addEventListener("online",t)})))}},329806:(e,t,s)=>{"use strict";function i(e,...t){return e&&"object"==typeof e?(0===t.length||t.forEach((t=>{null!=t&&"object"==typeof t&&Object.keys(t).forEach((s=>{const o=e[s],a=t[s];if(a===e)return;const r=Array.isArray(a);if(a&&(n(a)||r)){let t;t=r?o&&Array.isArray(o)?o:[]:o&&n(o)?o:{},e[s]=i(t,a)}else void 0!==a&&(e[s]=a)}))})),e):e}function n(e){if(!e||"[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);if(!t)return!0;const s=Object.hasOwnProperty.toString,i=t.hasOwnProperty("constructor")&&t.constructor;return"function"==typeof i&&s.call(i)===s.call(Object)}s.d(t,{deepExtend:()=>i})},706433:(e,t,s)=>{"use strict";var i;function n(e,t={}){const{page:s,query:n}=t;let o="/u/",a=!1,r=null;if(function(e){return e.is_broker||1===e.account_type}(e))switch(o="/broker/",s){case i.PublishedCharts:r="ideas/";break;case i.FollowingPeople:r="following/";break;case i.Followers:r="followers/";break;case i.Reviews:r="reviews/";break;case i.Settings:case i.SettingsProfile:case i.Notifications:case i.Billing:o="/u/",a=!0}else a=!0;return"Guest"!==e.username&&(o+=`${e.username}/`),n&&(o+=`?${n}`),void 0!==s&&(a?o+=`#${s}`:null!==r&&(o+=`${r}`)),o}s.d(t,{ProfilePages:()=>i,getUserProfilePath:()=>n}),function(e){e.Settings="settings",e.SettingsProfile="settings-profile",e.Notifications="notifications",e.Billing="billing",e.PublishedCharts="published-charts",e.FollowingPeople="following-people",e.Followers="followers",e.Reviews="reviews"}(i||(i={}))}}]);